features:
  - name: api
    scopes:
      - match: module
        prefix: "{{Path .Module.Name}}/"
        documents:
          - source: "api/__init__.py"
            target: "api/__init__.py"
            raw: true
          - source: "api/api.py.tpl"
            target: "api/api.py"
  - name: scaffold
    scopes:
      - match: interface
        prefix: "{{.Module.Name|Path}}/"
        documents:
          - source: "scaffold/__init__.py"
            target: "__init__.py"
            raw: true
          - source: "scaffold/interface.py.tpl"
            target: "{{snake .Interface.Name}}.py"
  - name: http
    scopes:
      - match: system
        documents:
          - source: "http/server.py.tpl"
            target: "http/server.py"
      - match: module
        prefix: "{{.Module.Name|Path}}/"
        documents:
          - source: "http/__init__.py"
            target: "http/__init__.py"
            raw: true
          - source: "http/client.py.tpl"
            target: "http/client.py"
          - source: "http/routes.py.tpl"
            target: "http/routes.py"
          - source: "http/shared.py.tpl"
            target: "http/shared.py"
  - name: olink
    scopes:
      - match: system
        documents:
          - source: "olink/OLINK_README.md"
            target: "OLINK_README.md"
            raw: true
          - source: "olink/server.py.tpl"
            target: "olinkserver.py"

      - match: module
        prefix: "{{.Module.Name|Path}}/"
        documents:
          - source: "olink/__init__.py"
            target: "olink/__init__.py"
            raw: true
          - source: "olink/client.py.tpl"
            target: "olink/client.py"
